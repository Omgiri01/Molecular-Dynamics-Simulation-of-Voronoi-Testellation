# Voronoi Polycrystal Molecular Dynamics Simulation

## Overview
This project focuses on generating a Voronoi polycrystal structure, simulating its deformation using LAMMPS, and analyzing the evolution of dislocations and grain structure. The simulation uses a 10-grain polycrystal structure with specific orientations defined in `voronoi10.txt`.

## Version Information
- **Current Version**: 1.0.0
- **Last Updated**: March 2024
- **Compatible with**: LAMMPS 23Jun2022 or later
- **Python Version**: 3.8 or later

## Project Details
- **System**: Aluminum (Al) polycrystal
- **Number of Grains**: 10 grains with specific orientations
- **Potential**: EAM potential (Al_LEA.eam.alloy)
- **Simulation Type**: Molecular Dynamics
- **Analysis Focus**: 
  - Dislocation evolution and density
  - Grain boundary behavior
  - Stress-strain relationships
  - Atomic structure analysis
- **Key Features**:
  - Voronoi tessellation for grain structure
  - Custom grain orientations
  - Comprehensive dislocation analysis
  - Stress-strain correlation studies

## Directory Structure
This project is organized into the following directories:

- `scripts/`: Contains all Python scripts for generating structures, running analysis, and processing data.
- `inputs/`: Stores input files for simulations and structure generation, such as LAMMPS input scripts, potential files, and initial structure files.
- `outputs/`: Holds raw output files from simulations and initial data processing, including LAMMPS dump files, log files, and stress-strain data.
- `results/`: Contains the final analysis outputs, including plots, reports, and analyzed data summaries.
- `studies/`:  Includes supplementary files related to specific studies or analyses, such as grain size distributions or visualization-specific files.
- `bin/`: Contains necessary executables or binary files (e.g., Atomsk).
- `README.md`: This file, providing an overview and instructions.
- `requirements.txt`: Lists the Python dependencies required for the scripts.

## Prerequisites
To run this project, you need to have the following software installed:

- **Atomsk**: Used for generating the initial Voronoi polycrystal structure.
- **LAMMPS**: The molecular dynamics simulator used for running the deformation simulation.
- **OVITO** or **VMD**: Visualization software for viewing atomic structures and trajectories.
- **Python 3.x**: With the libraries listed in `requirements.txt`.

## Setup
1.  **Clone or download** this project repository.
2.  **Install Python dependencies**: Navigate to the project root directory in your terminal and run:
    ```bash
    pip install -r requirements.txt
    ```
3.  **Place Atomsk executable**: Ensure the `atomsk.exe` file is placed inside the `bin/` directory.
4.  **LAMMPS executable**: Have the path to your LAMMPS executable ready. You will run LAMMPS commands from your system terminal, referencing the input files in the `inputs/` directory.

## Workflow
Follow these steps to generate the structure, run the simulation, and perform the analysis:

### 1. Generate Voronoi Structure
- Run the Python script to generate the initial polycrystal structure using Atomsk.
```bash
python scripts/generate_voronoi.py
```
- This will create `voronoi10.lmp` and `voronoi10.txt` in the `inputs/` directory.

### 2. Run MD Simulation in LAMMPS
- Open your system terminal and run LAMMPS using your LAMMPS executable and the input script located in `inputs/`.
- **Note**: Update the path to your LAMMPS executable in the command below.
```bash
"path/to/your/lmp.exe" -in inputs/lammps_input.in
```
- This simulation uses `inputs/lammps_input.in` and the potential file `inputs/Al_LEA.eam.alloy`.
- The simulation outputs `dump.voro` (trajectory) and `lammps.log`, and `log.lammps` into the `outputs/` directory. It also generates `stress_strain_data.txt` in the `outputs/` directory.

### 3. Analyze Deformation and Dislocation Evolution
- Run the main analysis script. This script reads the LAMMPS dump file and stress-strain data from `outputs/`.
```bash
python scripts/analyze_dislocations.py
```
- This script performs time evolution analysis of dislocations and grain structure, calculates dislocation density, and correlates it with stress-strain data.
- It generates analysis plots and a report in the `results/` directory.

### 4. Extract Stress-Strain Data (if not already generated by LAMMPS)
- If your LAMMPS run didn't directly output stress-strain data, you might use a script like this:
```bash
python scripts/extract_stress_strain_data.py
```
- This script would typically read `outputs/lammps.log` and output `outputs/stress_strain_data.txt`.

### 5. Plot Stress-Strain Curve
- Generate a stress-strain curve plot from the extracted data.
```bash
python scripts/stress_strain_curve.py
```
- This will use `outputs/stress_strain_data.txt` and save the plot in `results/`.

### 6. Analyze Deformations (using average displacement)
- Run the script to analyze overall deformation using methods like average particle displacement.
```bash
python scripts/analyze_deformations.py
```
- This script reads data from `outputs/` (e.g., `dump.voro`) and might generate reports or data in `results/` or `studies/`.

## Visualization in OVITO/VMD
- You can visualize the simulation trajectory and atomic structure using OVITO or VMD.
- Load the `outputs/dump.voro` file into your visualization software.
- Use built-in modifiers (like DXA, CNA, PTM in OVITO) or coloring options (like coloring by CSP or Type in VMD) to analyze defects, dislocations, and grain structure.
- The script `scripts/analyze_dislocations.py` can also export specific frames to `.xyz` format (`outputs/frame_0.xyz`) for easier loading into some visualization tools.

## Analysis Results
- The analysis results, including plots and detailed reports, are located in the `results/` directory.
- Refer to `results/dislocation_evolution_report.md` for a summary of the time evolution of dislocations and grain structure.
- Plots like `results/dislocation_evolution.png` and `results/strain_dislocation_correlation.png` provide visual insights.

## Notes
- Ensure all necessary executables (Atomsk, LAMMPS) are correctly configured and accessible.
- Check the LAMMPS log files (`outputs/lammps.log`, `outputs/log.lammps`) for any simulation errors.
- The analysis scripts are configured to read from the `outputs/` directory and write to the `results/` and `outputs/` directories.

## Troubleshooting
### Common Issues and Solutions

1. **LAMMPS Execution Issues**
   - If LAMMPS fails to start, verify the path to your LAMMPS executable
   - Check if the potential file (`Al_LEA.eam.alloy`) is in the correct location
   - Ensure all input files have correct permissions

2. **Analysis Script Errors**
   - If Python scripts fail, verify all dependencies are installed
   - Check if the required input files exist in the correct directories
   - Ensure Python version is 3.x

3. **Visualization Problems**
   - For OVITO: If DXA analysis fails, try adjusting the Burgers vector parameters
   - For VMD: If coloring by CSP doesn't work, verify the dump file format

### Performance Optimization
- For large systems, consider adjusting the LAMMPS input parameters:
  - Modify the neighbor list update frequency
  - Adjust the timestep size
  - Optimize the number of processors used

## Contributing
We welcome contributions to improve this project! Here's how you can help:

1. **Reporting Issues**
   - Use the GitHub issue tracker
   - Include detailed steps to reproduce the problem
   - Attach relevant input/output files

2. **Suggesting Improvements**
   - Fork the repository
   - Create a new branch for your feature
   - Submit a pull request with a clear description

3. **Code Style**
   - Follow PEP 8 guidelines for Python code
   - Include docstrings for all functions
   - Add comments for complex algorithms

## Citation
If you use this code in your research, please cite:
```
@software{voronoi_polycrystal_simulation,
  author = {Your Name},
  title = {Voronoi Polycrystal Molecular Dynamics Simulation},
  year = {2024},
  url = {https://github.com/yourusername/Voronoi2}
}
```

## License
This project is licensed under the MIT License - see the LICENSE file for details.

## Data Management
### Input Data
- `voronoi10.txt`: Contains coordinates and orientations for 10 grains
- `Al_LEA.eam.alloy`: EAM potential file for Aluminum
- `fcc_Al_unitcell.lmp`: FCC unit cell structure for Aluminum

### Output Data
- `dump.voro`: LAMMPS trajectory file containing atomic positions and properties
- `stress_strain_data.txt`: Stress-strain data from the simulation
- Analysis results in the `results/` directory

### Data Backup
- Regularly backup your simulation data
- Keep track of different simulation parameters in a log file
- Consider using version control for input files

## Reproducibility
To ensure reproducibility of results:

1. **Environment Setup**
   - Use the exact versions of software specified in `requirements.txt`
   - Document any system-specific configurations
   - Keep track of LAMMPS version used

2. **Parameter Documentation**
   - Document all simulation parameters
   - Include random seed values if used
   - Note any modifications to default settings

3. **Results Validation**
   - Compare results with known benchmarks
   - Document any deviations from expected behavior
   - Include error analysis where applicable

## Acknowledgments
- LAMMPS developers for the molecular dynamics engine
- OVITO team for visualization tools
- Python community for scientific computing libraries
- Contributors and users of this project

## Contact
For questions, suggestions, or collaboration:
- GitHub Issues: [Create an issue](https://github.com/yourusername/Voronoi2/issues)
- Email: [Your email] 